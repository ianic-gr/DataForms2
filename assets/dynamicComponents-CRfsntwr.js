import{inject as c,ref as u,watch as v,onMounted as g,nextTick as f,resolveComponent as p,openBlock as d,createElementBlock as _,Fragment as h,createElementVNode as y,createVNode as w,createBlock as b}from"vue";const k={__name:"Map",props:{id:{required:!0,type:String},fields:{type:Array,default:()=>[]}},setup(r){const s=r,o=c("dataformsStore"),a=u({}),t=u(null),i=u(null),m=()=>{t.value=L.map("map").setView([40.6212503,22.9048278],13),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(t.value),i.value=L.marker([40.6212503,22.9048278],{draggable:!0}).addTo(t.value),i.value.on("dragend",function(l){const{lat:e,lng:n}=i.value.getLatLng();a.value.binder.latitude=e,a.value.binder.longitude=n})};return v(()=>a.value.binder,({latitude:l,longitude:e})=>{if(!(!l||!e)){var n=new L.LatLng(l,e);i.value.setLatLng(n),t.value.setView(n,13)}},{deep:!0}),g(async()=>{await f(),a.value=o.getCurrentForm(s.id),m()}),(l,e)=>{const n=p("DataFormInput");return d(),_(h,null,[e[0]||(e[0]=y("div",{id:"map",class:"mb-8",style:{height:"400px"}},null,-1)),w(n,{formId:r.id,items:r.fields},null,8,["formId","items"])],64)}}},F={__name:"dynamicComponents",setup(r){const s={rows:[{input:[{whereAMI:{options:{label:"Where am i?","persistent-hint":!0},validation:"required"}}],dynamic:{component:k,fields:[{latitude:{options:{label:"Latitude",default:"40.634929113599355","persistent-hint":!0},validation:"required"},_responsive:{sm:12,md:6}},{longitude:{options:{label:"Longitude",default:"22.909068872420296","persistent-hint":!0},validation:"required"},_responsive:{sm:12,md:6}}]}}],submit:{title:"Save",color:"primary",click(o){console.log("data: ",o)}}};return(o,a)=>{const t=p("DataForm");return d(),b(t,{id:"contact-form",api:s})}}};export{F as default};
